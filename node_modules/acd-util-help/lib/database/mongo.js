"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.filterMongooseText = void 0;
var escapeRegExp = function (str) {
    var specialCharacters = [
        '-',
        '[',
        ']',
        '/',
        '{',
        '}',
        '(',
        ')',
        '*',
        '+',
        '?',
        '.',
        '\\',
        '^',
        '$',
        '|',
    ];
    var regex = RegExp('[' + specialCharacters.join('\\') + ']', 'g');
    return str.replace(regex, '\\$&');
};
function addMongooseParam(mongooseObject, key, value) {
    if (mongooseObject === void 0) { mongooseObject = {}; }
    if (!mongooseObject) {
        mongooseObject = {};
    }
    mongooseObject[key] = value;
    return mongooseObject;
}
function filterMongooseText(findParams, filters, keys) {
    if (findParams === void 0) { findParams = {}; }
    if (filters === void 0) { filters = {}; }
    if (!findParams) {
        findParams = {};
    }
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (key in filters) {
            findParams[key] = addMongooseParam(findParams[key], '$regex', new RegExp(escapeRegExp(filters[key]), 'i'));
        }
    }
    return findParams;
}
exports.filterMongooseText = filterMongooseText;
